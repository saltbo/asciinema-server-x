# 风险与对策

- 未授权访问或凭据泄露
  - 分离管理员与上传凭据；强制 https（由外部反向代理终结 TLS）
- 存储膨胀
  - 配额/保留策略、生命周期清理、备份压缩
- 数据一致性（纯文件系统）
  - 使用临时文件 + 原子 rename；失败时回滚清理
  - 定期自检：扫描不完整的 .tmp 文件并清理
- 大文件/并发
  - 限制文件大小，流式写入；提高并发时的文件系统吞吐
- 播放器兼容
  - 选用稳定版本的 asciinema-player；必要时回退到 iframe/原生脚本
- 迁移到对象存储
  - 预留抽象层 storage provider；路径与 URL 生成可替换
- 目录扫描性能
  - 用户目录按日分桶（YYYYMMDD）；大目录用 WalkDir 并尽量只读必要信息（Stat）
  - 如列表过大，前端分页或追加“最近 N 条”限制
- inode 限制
  - 注意宿主文件系统的 inode 配额；必要时归档老文件或合并至月目录
